{"version":3,"sources":["./src/app/features/login/login.component.ts","./src/app/features/login/login.component.html","./src/app/features/login/login.module.ts","./src/app/features/login/login.routing.ts"],"names":[],"mappings":"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","file":"src-app-features-login-login-module-es2015.js","sourcesContent":["import {SiteService} from './../../core/services/site.service';\r\nimport {HttpService} from './../../core/services/http.service';\r\nimport {Component, OnInit} from '@angular/core';\r\nimport {UserDataService} from 'src/app/core/services/user-data.service';\r\nimport {RouteStateService} from 'src/app/core/services/route-state.service';\r\nimport {SessionService} from 'src/app/core/services/session.service';\r\nimport {TranslateService} from '@ngx-translate/core';\r\nimport {UserContextService} from 'src/app/core/services/user-context.service';\r\nimport {environment} from 'src/environments/environment';\r\nimport {MessageService} from 'primeng/api';\r\n\r\nlet apiLogin = environment.apiLogin;\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: 'login.component.html',\r\n  styleUrls: ['login.component.css']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  userName: string;\r\n\r\n  password: string;\r\n\r\n  locale: string;\r\n\r\n  version: string;\r\n\r\n  sitesResult: any = [];\r\n\r\n  site: any;\r\n\r\n  utilisateur: any;\r\n\r\n  constructor(\r\n    private userService: UserDataService,\r\n    private messageService: MessageService,\r\n    private routeStateService: RouteStateService,\r\n    private sessionService: SessionService,\r\n    public translate: TranslateService,\r\n    private userContextService: UserContextService,\r\n    private http: HttpService,\r\n    private siteService: SiteService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.getAllPistes();\r\n    this.userName = \"\";\r\n    this.password = \"\";\r\n    this.locale = this.sessionService.getItem(\"ng-prime-language\");\r\n    this.version = environment.version;\r\n  }\r\n\r\n  getAllPistes() {\r\n    this.http\r\n      .get(environment.apiSite)\r\n      .subscribe((result) => {\r\n        this.sitesResult = result;\r\n        let emptySite = {\r\n          \"adresse\": \"\",\r\n          \"id\": \"\",\r\n          \"nom\": \"\",\r\n          \"ville\": \"\"\r\n        };\r\n        this.sitesResult.splice(0, 0, emptySite);\r\n      });\r\n  }\r\n\r\n  onClickLogin() {\r\n    let utilisateur = {\r\n      login: this.userName,\r\n      motDePasse: this.password\r\n    };\r\n    this.http.post(apiLogin, utilisateur).subscribe(res => {\r\n      this.utilisateur = res;\r\n      this.userContextService.setUser(this.utilisateur);\r\n      this.routeStateService.add(\"Dashboard\", '/main/dashboard', null, true);\r\n      this.siteService.site = this.utilisateur.site;\r\n      this.sessionService.setItem(\"site\", this.utilisateur.site);\r\n      this.sessionService.setItem(\"codeProfil\", this.utilisateur.profil.code);\r\n      return;\r\n    }, error => {\r\n      this.messageService.add({ severity: 'error', detail: \"Nom d'utilisateur ou mot de passe incorrect\" });\r\n      return;\r\n    });\r\n    // let user: User = this.userService.getUserByUserNameAndPassword(this.userName, this.password);\r\n    // if (user) {\r\n    //   this.userContextService.setUser(user);\r\n    //   this.routeStateService.add(\"Dashboard\", '/main/dashboard', null, true);\r\n    //   this.siteService.site = this.site;\r\n    //   this.sessionService.setItem(\"site\", this.site);\r\n    //   return;\r\n    // }\r\n    // this.toastService.addSingle('error', '', 'Invalid user.');\r\n    // return;\r\n  }\r\n\r\n  onLanguageChange($event) {\r\n    this.locale = $event.target.value;\r\n    if (this.locale == undefined || this.locale == null || this.locale.length == 0) {\r\n      this.locale = \"en\";\r\n    }\r\n    // the lang to use, if the lang isn't available, it will use the current loader to get them\r\n    this.translate.use(this.locale);\r\n    this.sessionService.setItem(\"ng-prime-language\", this.locale);\r\n  }\r\n\r\n  getUrl() {\r\n    return \"url('assets/images/bg-home.png')\";\r\n  }\r\n\r\n  doNothing() {\r\n    console.info(\"do nothing\");\r\n  }\r\n\r\n}\r\n","<div class=\"image\">\r\n  <div class=\"p-grid p-nogutter p-justify-center p-align-center\" style=\"height:100%\">\r\n    <div class=\"centertest\">\r\n      <div class=\"p-grid p-justify-center p-align-center\">\r\n        <img src=\"assets/images/logo-original.png\" alt=\"\" width=\"200px\" height=\"auto\" style=\"opacity: 0.95;\">\r\n        <div class=\"p-col-12\">\r\n          <div class=\"ui-inputgroup\">\r\n                        <span class=\"ui-inputgroup-addon\"><span class=\"fa\r\n                                fa-user\"></span></span>\r\n            <input id=\"input-username\" type=\"text\" size=\"30\" pInputText [(ngModel)]=\"userName\"\r\n                   placeholder=\"Entrez votre login\">\r\n          </div>\r\n        </div>\r\n        <div class=\"p-col-12\">\r\n          <div class=\"ui-inputgroup\">\r\n                        <span class=\"ui-inputgroup-addon\"><span class=\"fa\r\n                                fa-key\"></span></span>\r\n            <input id=\"input-password\" type=\"password\" size=\"30\" pInputText [(ngModel)]=\"password\"\r\n                   (keyup.enter)=\"userName && password ? onClickLogin() : doNothing()\"\r\n                   placeholder=\"Entrez votre mot de passe\">\r\n          </div>\r\n          <br>\r\n        </div>\r\n      </div>\r\n      <div class=\"p-grid\">\r\n        <div class=\"p-col-12 center\">\r\n          <button pButton type=\"button\" label=\"CONNEXION\" class=\"ui-button-raised rougebutton\" (click)=\"onClickLogin()\"\r\n                  [disabled]=\"!userName || !password\"></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n<p-toast class=\"custom-toast\" position=\"bottom-center\"></p-toast>\r\n","import { DropdownModule, PanelModule } from 'primeng';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { LoginComponent } from 'src/app/features/login/login.component';\r\nimport { LoginRoutingModule } from 'src/app/features/login/login.routing';\r\nimport { AppCommonModule } from 'src/app/app.common.module';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\n\r\nexport function HttpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http);\r\n}\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    LoginRoutingModule,\r\n    AppCommonModule,\r\n    DropdownModule,\r\n    PanelModule,\r\n    TranslateModule.forChild({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: HttpLoaderFactory,\r\n        deps: [HttpClient]\r\n      },\r\n      isolate: false\r\n    })\r\n  ],\r\n  declarations: [LoginComponent],\r\n  exports: [TranslateModule]\r\n})\r\nexport class LoginModule { }","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { LoginComponent } from 'src/app/features/login/login.component';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        component: LoginComponent\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class LoginRoutingModule { }"],"sourceRoot":"webpack:///"}